@inject IStringLocalizer<App> Localizer
@inject PageHistory PageHistory

<div>
    <h1>
        <span class="@IconClass" />@Localizer.AddOrEdit(Label, ObjectName, Owner, IsAdd)
        <span class="fa fa-arrow-alt-circle-left" @onclick="@Back" />
        @if (IsHelpAvailable)
        {
            <span class="fa fa-question-circle" @onclick="ToggleHelp" />
        }
    </h1>
    <ContentView ContentName="@HelpContentName" IsHidden="@HelpIsHidden" BackgroundColor="#ffffcc"/>
    <hr />
</div>

@code {
    [Parameter] public string? IconClass { get; set; }
    [Parameter] public string? Label { get; set; }
    [Parameter] public string? ObjectName { get; set; }
    [Parameter] public object? Owner { get; set; }
    [Parameter] public bool IsAdd { get; set; }
    [Parameter] public string? HelpContext { get; set; }

    bool HelpIsVisible;
    bool HelpIsHidden => !HelpIsVisible;
    bool IsHelpAvailable => HelpContext.HasValue();
    string? HelpContentName => string.IsNullOrWhiteSpace(HelpContext) ? null : $"{HelpContext}Help";


    void ToggleHelp()
    {
        HelpIsVisible = !HelpIsVisible;
    }

    void Back()
    {
        PageHistory.NavigateBack();
    }

}
