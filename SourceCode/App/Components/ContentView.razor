@inject IContentService ContentService
@inject IStringLocalizer<App> Localizer

@if (Content is null)
{
    @Localizer["Getting content. Please wait..."]
}
else
{
    if (ShowModificationTime)
    {
        <div class="alert alert-info">@string.Format(Localizer["ThisContentWasModified"].Value, Content.LastModified)</div>
    }
    @((MarkupString)Content.AsHtml)
}
@code {
    [Parameter] public string? ContentName { get; set; }
    [Parameter] public string? Language { get; set; } = null;
    [Parameter] public string? Href { get; set; } = null;
    [Parameter] public bool ShowModificationTime { get; set; }

    TextContent? Content;

    protected async override Task OnParametersSetAsync()
    {
        if (Href is not null)
        {
            Content = await ContentService.GetRemoteTextContent(Href);
        }
        else if (ContentName is not null)
        {
            Content = await ContentService.GetTextContent(ContentName, Language);
        }
        else
        {
            Content = TextContent.Empty;
        }
    }
}
