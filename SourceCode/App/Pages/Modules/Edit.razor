@page "/Modules/Edit/{id:int}"
@attribute [Authorize(Policy = "User")]

@inject IStringLocalizer<App> Localizer
@inject IModuleService ModuleService

@code {
    [CascadingParameter] private Task<AuthenticationState>? AuthenticationStateTask { get; set; }
    [Parameter] public int Id { get; set; }
    ClaimsPrincipal? Principal;
    Module? Module;

    protected override async Task OnParametersSetAsync()
    {
        Principal = await AuthenticationStateTask.GetClaimsPrincipalAsync();
        if (Principal is not null && Id > 0)
        {
            Module = await ModuleService.FindByIdAsync(Principal, Id);
        }
    }
}
